@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;

    --radius: 0.5rem;

    --chart-1: 142 71% 52%; /* Зеленый для доходов */
    --chart-2: 0 84% 60%; /* Красный для расходов */
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    --sidebar-background: 0 0% 98%;

    --sidebar-foreground: 240 5.3% 26.1%;

    --sidebar-primary: 240 5.9% 10%;

    --sidebar-primary-foreground: 0 0% 98%;

    --sidebar-accent: 240 4.8% 95.9%;

    --sidebar-accent-foreground: 240 5.9% 10%;

    --sidebar-border: 220 13% 91%;

    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  /* Dark theme */
  .dark {
    /* Base surfaces */
    --background: 0 0% 3.9%;        /* ~ #121212 */
    --foreground: 0 0% 98%;       /* ~ #B0B0B0 */

    --card: 0 0% 3.9%;             /* ~ #1E1E1E */
    --card-foreground: 0 0% 98%;  /* light headings */

    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;

    /* Accents */
    --primary: 0 0% 98%;       /* vivid violet for strong contrast */
    --primary-foreground: 0 0% 9%;

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    /* Borders/inputs/ring */
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;          /* match primary for focus */

    --radius: 0.75rem;

    --chart-1: 142 70% 50%; /* Зеленый для доходов в темной теме */
    --chart-2: 0 70% 55%; /* Красный для расходов в темной теме */
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;

    --sidebar-background: 240 5.9% 10%;

    --sidebar-foreground: 240 4.8% 95.9%;

    --sidebar-primary: 224.3 76.3% 48%;

    --sidebar-primary-foreground: 0 0% 100%;

    --sidebar-accent: 240 3.7% 15.9%;

    --sidebar-accent-foreground: 240 4.8% 95.9%;

    --sidebar-border: 240 3.7% 15.9%;

    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  * { @apply border-border; }
  html { @apply scroll-smooth; scrollbar-gutter: stable; }
  body { @apply bg-background text-foreground; }

  /* Global scrollbar (dark-friendly) */
  body { scrollbar-width: thin; scrollbar-color: hsl(var(--muted-foreground) / 0.25) transparent; }
  body::-webkit-scrollbar { width: 10px; height: 10px; }
  body::-webkit-scrollbar-track { background: transparent; }
  body::-webkit-scrollbar-thumb { background-color: hsl(var(--muted-foreground) / 0.25); border-radius: 8px; }
}

@layer utilities {
  /* Hide scrollbar visuals until hover, for elements marked as .scroll-area */
  .scroll-area { scrollbar-width: thin; scrollbar-color: transparent transparent; }
  .scroll-area:hover { scrollbar-color: hsl(var(--muted-foreground) / 0.35) transparent; }
  .scroll-area::-webkit-scrollbar { width: 8px; height: 8px; }
  .scroll-area::-webkit-scrollbar-track { background: transparent; }
  .scroll-area::-webkit-scrollbar-thumb { background-color: transparent; border-radius: 8px; }
  .scroll-area:hover::-webkit-scrollbar-thumb { background-color: hsl(var(--muted-foreground) / 0.35); }
} 

/* Editor theming fixes (Notes drawer) */
@layer components {
  /* Ensure Markdown editor content is readable in both themes */
  .g-md-editor, .g-md-editor .milkdown, .g-md-editor .ProseMirror {
    color: hsl(var(--foreground));
    background-color: hsl(var(--background));
  }

  /* Force readable colors in dark theme for editor */
  .dark .g-md-editor,
  .dark .g-md-editor .milkdown,
  .dark .g-md-editor .ProseMirror { color: hsl(var(--foreground)) !important; }
  .dark .g-md-editor a { color: hsl(var(--primary)); }

  /* Ant Design Drawer: inherit proper dark colors */
  .dark .ant-drawer .ant-drawer-body {
    color: hsl(var(--foreground));
    background-color: hsl(var(--background));
  }
  .dark .ant-drawer .ant-drawer-header,
  .dark .ant-drawer .ant-drawer-title {
    color: hsl(var(--foreground));
    background-color: hsl(var(--background));
  }

  /* Selection color inside editor */
  .g-md-editor .ProseMirror ::selection { background-color: hsl(var(--primary) / 0.25); }

  /* Code blocks (highlight.js) adjustments for dark theme */
  .dark pre code.hljs,
  .dark code.hljs { color: #e6edf3; background: #0d1117; }
  .dark pre.hljs,
  .dark pre code { background: #0d1117; }
  .dark .hljs-comment,
  .dark .hljs-quote { color: #8b949e; }
  .dark .hljs-keyword,
  .dark .hljs-selector-tag,
  .dark .hljs-subst { color: #ff7b72; }
  .dark .hljs-string,
  .dark .hljs-title,
  .dark .hljs-name,
  .dark .hljs-type,
  .dark .hljs-attribute { color: #a5d6ff; }

  /* Enforce LTR direction in markdown editor to prevent mirrored typing */
  .g-md-editor,
  .g-md-editor .milkdown,
  .g-md-editor .ProseMirror {
    direction: ltr;
    unicode-bidi: plaintext;
  }

  /* Specifically ensure code blocks are LTR while editing */
  .g-md-editor .ProseMirror pre,
  .g-md-editor .ProseMirror pre code {
    direction: ltr !important;
    unicode-bidi: plaintext !important;
    text-align: left;
  }
}